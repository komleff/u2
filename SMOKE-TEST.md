# Smoke Test для базовой клиентской сборки (M2.3 Stage 1)

## Цель
Быстрая проверка работоспособности клиента после сборки.

## Предварительные требования
- Node.js ≥ 18
- npm установлен
- Зависимости установлены (`npm install`)

## Тест 1: Сборка и линтинг

```bash
npm run lint
npm run build
```

**Ожидаемый результат:**
- ✅ Линтер проходит без ошибок и предупреждений
- ✅ Сборка завершается успешно
- ✅ Файлы появляются в директории `dist/`

## Тест 2: Запуск в offline режиме

```bash
npm run dev
```

**Действия:**
1. Открыть браузер по адресу `http://localhost:5173/` (или другой порт, указанный в консоли)
2. Проверить отображение HUD в левом верхнем углу:
   - SPD (скорость)
   - AOA (угол атаки)
   - ALT (высота)
   - Предупреждения (WARN)
3. Проверить отображение корабля (голубой круг в центре экрана)
4. Нажать клавишу **W** (thrust up) - корабль должен начать движение
5. Нажать клавишу **H** - HUD должен скрыться/появиться
6. Нажать клавишу **M** - должен переключиться режим полета

**Ожидаемый результат:**
- ✅ Страница загружается без ошибок
- ✅ HUD отображается корректно
- ✅ Корабль отображается
- ✅ Управление откликается на клавиши
- ✅ Нет ошибок в консоли браузера

## Тест 3: Unit тесты

```bash
npm test
```

**Ожидаемый результат:**
- ✅ Smoke test проходит
- ⚠️ Интеграционные тесты могут упасть (требуют .NET сервер)
- ✅ Минимум 1 тест должен пройти успешно

## Тест 4: Online режим (опционально - требует .NET SDK)

**Предварительные требования:**
- .NET SDK 8.0 установлен

**Действия:**
1. В отдельном терминале запустить сервер:
   ```bash
   dotnet run --project src/server/U2.Server.csproj -- --network
   ```
2. Дождаться сообщения о запуске сервера на порту 8080
3. Запустить клиент:
   ```bash
   npm run dev
   ```
4. Открыть браузер и нажать клавишу **O**
5. Проверить наличие зеленого индикатора "ONLINE" в левом верхнем углу

**Ожидаемый результат:**
- ✅ Сервер запускается без ошибок
- ✅ Клиент подключается к серверу
- ✅ Появляется зеленый индикатор "ONLINE"
- ✅ WebSocket соединение активно (проверить в DevTools → Network → WS)

## Критерии успеха

**Минимальные требования (offline):**
- ✅ Линтер проходит
- ✅ Сборка успешна
- ✅ Клиент отображается в браузере
- ✅ HUD показывает данные
- ✅ Корабль отображается
- ✅ Управление работает

**Полные требования (с сервером):**
- ✅ Все минимальные требования
- ✅ Сервер запускается
- ✅ WebSocket подключение работает
- ✅ Клиент получает snapshots от сервера

## Известные проблемы

1. **Интеграционные тесты падают без .NET SDK** - это ожидаемое поведение
2. **Port 5173 занят** - Vite автоматически выберет другой порт (5174, 5175 и т.д.)
3. **Сервер не запускается** - проверьте установлен ли .NET SDK 8.0

## Время выполнения

- Тест 1-2: ~2-3 минуты
- Тест 3: ~30-60 секунд
- Тест 4: ~5 минут (с установкой .NET SDK)

**Общее время smoke-теста: 5-10 минут**
