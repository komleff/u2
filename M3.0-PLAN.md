# M3.0: Flight Assist ON/OFF ‚Äî –ü–ª–∞–Ω —Ä–∞–±–æ—Ç

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-11-20  
**–°—Ç–∞—Ç—É—Å**: üü¢ –ì–æ—Ç–æ–≤ –∫ –Ω–∞—á–∞–ª—É  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: M2.3 ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω

---

## –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–µ–∑—é–º–µ

**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ Flight Assist (FA:ON/OFF) –∏ —Å–∏—Å—Ç–µ–º—É —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä–µ–∂–∏–º–∞ FA:ON, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ä–∞–∑–ª–∏—á–∏–º—ã–π –≥–µ–π–º–ø–ª–µ–π –º–µ–∂–¥—É –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**:
- ‚úÖ FA:ON: –ê–≤—Ç–æ–ø–∏–ª–æ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ—Ä–∞–±–ª—å, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å
- ‚úÖ FA:OFF: –°–≤–æ–±–æ–¥–Ω—ã–π –ø–æ–ª—ë—Ç –ø–æ –∏–Ω–µ—Ä—Ü–∏–∏ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–∫–ª–∞–≤–∏—à–∞ Z)
- ‚úÖ –û–Ω–ª–∞–π–Ω-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è FA –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º

---

## Definition of Done (DoD)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ FA:ON/OFF**:
   - ‚úÖ –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FA –≤ `PlayerInputProto.flight_assist`
   - ‚úÖ –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ FA –∫ —Å—É—â–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞
   - ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ FA —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `EntitySnapshotProto.flight_assist`

2. **FA:OFF (—Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ–ª—ë—Ç)**:
   - ‚úÖ –ö–æ–º–∞–Ω–¥—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ –¥–≤–∏–≥–∞—Ç–µ–ª—è–º (thrust, yaw)
   - ‚úÖ –°–∫–æ—Ä–æ—Å—Ç–∏ **–ù–ï –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è** (–∫—Ä–æ–º–µ —Ä–µ–ª—è—Ç–∏–≤–∏—Å—Ç—Å–∫–æ–≥–æ –ø—Ä–µ–¥–µ–ª–∞ 0.999c‚Ä≤)
   - ‚úÖ –ö–æ—Ä–∞–±–ª—å –ª–µ—Ç–∏—Ç –ø–æ –∏–Ω–µ—Ä—Ü–∏–∏ –ø—Ä–∏ –æ—Ç–ø—É—â–µ–Ω–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
   - ‚úÖ –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –≤—Ä–∞—â–µ–Ω–∏—è

3. **FA:ON (—Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—ë—Ç)**:
   - ‚úÖ –õ–∏–Ω–µ–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ `ShipConfig.flightAssistLimits.linearSpeedMax_mps`
   - ‚úÖ –£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç `ShipConfig.flightAssistLimits.crewGLimit.linear_g`
   - ‚úÖ –í—Ä–∞—â–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–∞—Å–∏—Ç—Å—è (PD-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä)
   - ‚úÖ –°–∫–æ—Ä–æ—Å—Ç—å –≥–∞—Å–∏—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—É—â–µ–Ω–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ (damping)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **Unit-—Ç–µ—Å—Ç—ã FlightAssistSystem** (C#):
   - ‚úÖ FA:OFF –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
   - ‚úÖ FA:ON –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å —Å–æ–≥–ª–∞—Å–Ω–æ `linearSpeedMax_mps`
   - ‚úÖ FA:ON –≥–∞—Å–∏—Ç –≤—Ä–∞—â–µ–Ω–∏–µ (angular velocity ‚Üí 0)
   - ‚úÖ FA:ON –ø—Ä–∏–º–µ–Ω—è–µ—Ç damping –ø—Ä–∏ –Ω—É–ª–µ–≤–æ–º –≤–≤–æ–¥–µ
   - ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ FA:ON‚ÜíOFF‚ÜíON –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –º–µ–Ω—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** (TS):
   - ‚úÖ –ö–ª–∞–≤–∏—à–∞ Z –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç FA –≤ UI
   - ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ FA –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - ‚úÖ –°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç FA –≤ —Å–Ω–∞–ø—à–æ—Ç–∞—Ö
   - ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä FA:ON/OFF —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

3. **–û–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - ‚úÖ FA:ON: –∫–æ—Ä–∞–±–ª—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –∫–ª–∞–≤–∏—à
   - ‚úÖ FA:OFF: –∫–æ—Ä–∞–±–ª—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ª–µ—Ç–µ—Ç—å –ø–æ –∏–Ω–µ—Ä—Ü–∏–∏
   - ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ FA –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä—ã–≤–∫–æ–≤/–≥–ª—é–∫–æ–≤
   - ‚úÖ 2 –∏–≥—Ä–æ–∫–∞ –≤–∏–¥—è—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FA –¥—Ä—É–≥ –¥—Ä—É–≥–∞

### –ö–∞—á–µ—Å—Ç–≤–æ

- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: > 80% –¥–ª—è FlightAssistSystem
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: < 0.5 –º—Å –Ω–∞ Execute() –ø—Ä–∏ 100 –∫–æ—Ä–∞–±–ª—è—Ö
- ‚úÖ –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π: –≤—Å–µ —Ç–µ—Å—Ç—ã M0-M2.3 –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (C#)

**FlightAssistSystem.cs** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
```csharp
// src/server/ECS/Systems/FlightAssistSystem.cs
public class FlightAssistSystem : IExecuteSystem
{
    private readonly GameContext _context;
    private readonly float _deltaTime;
    private readonly float _cPrime; // c‚Ä≤ = 3 –∫–º/—Å
    
    public FlightAssistSystem(Contexts contexts, float deltaTime, float cPrime)
    {
        _context = contexts.game;
        _deltaTime = deltaTime;
        _cPrime = cPrime;
    }
    
    public void Execute()
    {
        var entities = _context.GetEntities(GameMatcher.AllOf(
            GameMatcher.FlightAssist,
            GameMatcher.Velocity,
            GameMatcher.ShipConfig
        ));
        
        foreach (var entity in entities)
        {
            if (entity.flightAssist.enabled)
            {
                ApplyFA_ON(entity);
            }
            // FA:OFF: –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º (—Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ–ª—ë—Ç)
        }
    }
    
    private void ApplyFA_ON(GameEntity entity)
    {
        var config = entity.shipConfig.value;
        var limits = config.FlightAssistLimits;
        var velocity = entity.velocity;
        
        // 1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ª–∏–Ω–µ–π–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
        var speed = velocity.LinearVelocity.Length();
        var maxSpeed = limits.LinearSpeedMax_mps;
        
        if (speed > maxSpeed)
        {
            var damping = CalculateSpeedDamping(speed, maxSpeed, limits.CrewGLimit.Linear_g);
            velocity.LinearVelocity *= damping;
        }
        
        // 2. –ì–∞—à–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è (PD-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä)
        var angularDamping = CalculateAngularDamping(
            velocity.AngularVelocity_radps,
            config.Physics.AngularAcceleration_dps2
        );
        velocity.AngularVelocity_radps *= angularDamping;
        
        // 3. Damping –ø—Ä–∏ –æ—Ç–ø—É—â–µ–Ω–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
        if (!entity.hasControlState || IsControlIdle(entity.controlState))
        {
            var linearDamping = CalculateLinearDamping(limits);
            velocity.LinearVelocity *= linearDamping;
        }
        
        entity.ReplaceVelocity(velocity.LinearVelocity, velocity.AngularVelocity_radps);
    }
    
    private float CalculateSpeedDamping(float currentSpeed, float maxSpeed, float maxAccel_g)
    {
        // Exponential decay: v_new = v * exp(-k * dt)
        // k –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–µ–≤—ã—Å–∏—Ç—å crewGLimit
        var overspeed = currentSpeed - maxSpeed;
        var maxDecel = maxAccel_g * 9.81f; // –º/—Å¬≤
        var dampingRate = Mathf.Min(overspeed / _deltaTime, maxDecel) / currentSpeed;
        return Mathf.Exp(-dampingRate * _deltaTime);
    }
    
    private float CalculateAngularDamping(float angularVel_radps, AngularAccel config)
    {
        // PD-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä: target = 0, damping –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ max angular accel
        var maxAngularAccel_radps2 = Mathf.Max(
            config.Pitch_dps2, 
            config.Yaw_dps2, 
            config.Roll_dps2
        ) * Mathf.Deg2Rad;
        
        var dampingRate = 2.0f * maxAngularAccel_radps2 / Mathf.Abs(angularVel_radps);
        return Mathf.Exp(-dampingRate * _deltaTime);
    }
    
    private float CalculateLinearDamping(FlightAssistLimits limits)
    {
        // Gentle damping: –ø–æ–ª–æ–≤–∏–Ω–∞ –æ—Ç max deceleration
        var dampingRate = (limits.CrewGLimit.Linear_g * 9.81f * 0.5f) / _deltaTime;
        return Mathf.Exp(-dampingRate * _deltaTime);
    }
    
    private bool IsControlIdle(ControlStateComponent control)
    {
        return Mathf.Abs(control.Thrust) < 0.01f &&
               Mathf.Abs(control.StrafeX) < 0.01f &&
               Mathf.Abs(control.YawInput) < 0.01f;
    }
}
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ GameWorld.cs**
```csharp
// src/server/Game/GameWorld.cs
public void Initialize()
{
    _systems = new Systems()
        .Add(new InputProcessingSystem(_contexts))
        .Add(new PhysicsSystem(_contexts, _config.FixedDeltaTime, _config.C_Prime))
        .Add(new FlightAssistSystem(_contexts, _config.FixedDeltaTime, _config.C_Prime)) // –ù–û–í–û–ï
        .Add(new HealthSystem(_contexts));
    
    _systems.Initialize();
}
```

#### 2. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (TypeScript)

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ InputManager.ts**
```typescript
// src/client/input/InputManager.ts
export class InputManager {
  private flightAssistEnabled = true; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é FA:ON
  
  public update(deltaTime: number): PlayerInput {
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ FA –ø–æ –∫–ª–∞–≤–∏—à–µ Z
    if (this.keyboard.wasPressed('KeyZ')) {
      this.flightAssistEnabled = !this.flightAssistEnabled;
      console.log(`Flight Assist: ${this.flightAssistEnabled ? 'ON' : 'OFF'}`);
    }
    
    return {
      thrust: this.keyboard.isDown('KeyW') ? 1.0 : 0.0,
      strafeX: /* ... */,
      yawInput: /* ... */,
      flightAssist: this.flightAssistEnabled, // ‚Üê –í–∫–ª—é—á–∏—Ç—å –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª
      sequenceNumber: this.nextSequence++,
      timestampMs: Date.now()
    };
  }
}
```

**UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ HUD**
```typescript
// src/client/ui/HUD.ts
export class HUD {
  private faIndicator: HTMLDivElement;
  
  public updateFlightAssist(enabled: boolean) {
    this.faIndicator.textContent = enabled ? 'FA:ON' : 'FA:OFF';
    this.faIndicator.style.color = enabled ? '#00ff00' : '#ff0000';
  }
}
```

**PredictionEngine —É—á–∏—Ç—ã–≤–∞–µ—Ç FA**
```typescript
// src/client/physics/PredictionEngine.ts
export class PredictionEngine {
  public predict(state: EntityState, input: PlayerInput, deltaTime: number): EntityState {
    // 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–∑–∏–∫—É (–∫–∞–∫ –≤ PhysicsSystem)
    let newState = this.applyPhysics(state, input, deltaTime);
    
    // 2. –ï—Å–ª–∏ FA:ON, –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—é (–∫–∞–∫ –≤ FlightAssistSystem)
    if (input.flightAssist) {
      newState = this.applyFlightAssist(newState, deltaTime);
    }
    
    return newState;
  }
  
  private applyFlightAssist(state: EntityState, deltaTime: number): EntityState {
    // –î—É–±–ª–∏—Ä—É–µ–º –ª–æ–≥–∏–∫—É C# FlightAssistSystem
    // (speed limiting, angular damping, linear damping)
    // ...
  }
}
```

---

## –ó–∞–¥–∞—á–∏ –∏ –æ—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

### M3.1: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ FA:ON/OFF (1 –Ω–µ–¥–µ–ª—è)

| –ó–∞–¥–∞—á–∞ | –í—Ä–µ–º—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|--------|-------|-----------|
| 1.1 –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∞–≤–∏—à–∏ Z –≤ InputManager | 2 —á–∞—Å–∞ | P0 |
| 1.2 –û–±–Ω–æ–≤–∏—Ç—å NetworkClient –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ `flightAssist` | 1 —á–∞—Å | P0 |
| 1.3 UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä FA:ON/OFF –≤ HUD | 3 —á–∞—Å–∞ | P0 |
| 1.4 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ FA | 2 —á–∞—Å–∞ | P0 |
| 1.5 –û–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç: 2 –∏–≥—Ä–æ–∫–∞ –≤–∏–¥—è—Ç FA –¥—Ä—É–≥ –¥—Ä—É–≥–∞ | 2 —á–∞—Å–∞ | P1 |

**–ò—Ç–æ–≥–æ M3.1**: ~10 —á–∞—Å–æ–≤ (1-2 –¥–Ω—è)

---

### M3.2: FlightAssistSystem (2-3 –Ω–µ–¥–µ–ª–∏)

| –ó–∞–¥–∞—á–∞ | –í—Ä–µ–º—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|--------|-------|-----------|
| 2.1 –°–æ–∑–¥–∞—Ç—å FlightAssistSystem.cs | 4 —á–∞—Å–∞ | P0 |
| 2.2 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ª–∏–Ω–µ–π–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ | 4 —á–∞—Å–∞ | P0 |
| 2.3 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å PD-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è | 6 —á–∞—Å–æ–≤ | P0 |
| 2.4 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å damping –ø—Ä–∏ idle | 3 —á–∞—Å–∞ | P0 |
| 2.5 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ GameWorld | 1 —á–∞—Å | P0 |
| 2.6 Unit-—Ç–µ—Å—Ç—ã FlightAssistSystem (10+ —Ç–µ—Å—Ç–æ–≤) | 8 —á–∞—Å–æ–≤ | P0 |
| 2.7 –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å FA –ª–æ–≥–∏–∫—É –≤ TypeScript PredictionEngine | 6 —á–∞—Å–æ–≤ | P0 |
| 2.8 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–æ–Ω–ª–∞–π–Ω FA:ON/OFF) | 4 —á–∞—Å–∞ | P1 |
| 2.9 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ FA (playtesting) | 6 —á–∞—Å–æ–≤ | P2 |
| 2.10 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (M3-README.md) | 2 —á–∞—Å–∞ | P2 |

**–ò—Ç–æ–≥–æ M3.2**: ~44 —á–∞—Å–∞ (1-1.5 –Ω–µ–¥–µ–ª–∏ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–Ω—è—Ç–æ—Å—Ç–∏)

---

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ M3.0**: 54 —á–∞—Å–∞ ‚Üí **2-3 –Ω–µ–¥–µ–ª–∏** (—Å —É—á–µ—Ç–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏—Ç–µ—Ä–∞—Ü–∏–π)

---

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### üü° –†–∏—Å–∫ 1: –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ C# vs TypeScript

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–í–ª–∏—è–Ω–∏–µ**: –í—ã—Å–æ–∫–æ–µ (–ø—Ä–∏–≤–æ–¥–∏—Ç –∫ "–ø—Ä—ã–∂–∫–∞–º" –ø—Ä–∏ reconciliation)

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π deltaTime (1/60 —Å–µ–∫)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ C# –∏ TS —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- Shared constants: —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ JSON
- Code review: –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ FA –ª–æ–≥–∏–∫–∏ 1:1

---

### üü° –†–∏—Å–∫ 2: FA:ON —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π/—Å–ª–∞–±—ã–π

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–í–ª–∏—è–Ω–∏–µ**: –°—Ä–µ–¥–Ω–µ–µ (–ø–ª–æ—Ö–æ–π –≥–µ–π–º–ø–ª–µ–π)

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è: –≤—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ ShipConfig
- Playtesting: –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –õ–æ–≥–∏/—Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è: –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å damping rates
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ FA

---

### üü¢ –†–∏—Å–∫ 3: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å FlightAssistSystem

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è  
**–í–ª–∏—è–Ω–∏–µ**: –ù–∏–∑–∫–æ–µ

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –∏–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è Execute()
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Mathf.Exp()
- Batching: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ FA:ON —Å—É—â–Ω–æ—Å—Ç–∏

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

- ‚úÖ FA:ON: –∫–æ—Ä–∞–±–ª—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –∫–ª–∞–≤–∏—à –∑–∞ < 3 —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ FA:OFF: –∫–æ—Ä–∞–±–ª—å –ª–µ—Ç–∏—Ç –ø–æ –∏–Ω–µ—Ä—Ü–∏–∏ > 10 —Å–µ–∫—É–Ω–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ FA:ON‚ÜíOFF: –≤—Ä–∞—â–µ–Ω–∏–µ –Ω–µ –≥–∞—Å–∏—Ç—Å—è –≤ FA:OFF
- ‚úÖ –û–Ω–ª–∞–π–Ω: 2 –∏–≥—Ä–æ–∫–∞ –≤–∏–¥—è—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FA –¥—Ä—É–≥ –¥—Ä—É–≥–∞

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ FlightAssistSystem.Execute() < 0.5 –º—Å @ 100 –∫–æ—Ä–∞–±–ª–µ–π
- ‚úÖ –ù–µ—Ç FPS –¥—Ä–æ–ø–æ–≤ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏/–≤—ã–∫–ª—é—á–µ–Ω–∏–∏ FA

### –ö–∞—á–µ—Å—Ç–≤–æ

- ‚úÖ 10+ unit-—Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ 4 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã M0-M2.3 –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å (–Ω–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π)

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ì–æ—Ç–æ–≤–æ (Prere–∫–≤–∏–∑–∏—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã)

- ‚úÖ M2.3: Client-side prediction
- ‚úÖ M2.3: Reconciliation
- ‚úÖ M2.1: Protobuf –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `flight_assist` –≤ `PlayerInputProto` –∏ `EntitySnapshotProto`
- ‚úÖ M1: PhysicsSystem –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–∏—è

### –ë–ª–æ–∫–∏—Ä—É–µ—Ç

- ‚ùå M4: HUD (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã FA —Å—Ç–∞—Ç—É—Å–∞)
- ‚ùå M5: –ó–∞–≥–ª—É—à–∫–∏ (FA –≤–ª–∏—è–µ—Ç –Ω–∞ —É—Ä–æ–Ω/—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ç—Ä–µ–ª—å–±—ã –≤ –±—É–¥—É—â–µ–º)

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ M3.0

1. **M4: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π HUD** (1-2 –Ω–µ–¥–µ–ª–∏)
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏, —É—Å–∫–æ—Ä–µ–Ω–∏—è, –∫—É—Ä—Å–∞
   - FA —Å—Ç–∞—Ç—É—Å (–≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)
   - –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (F3)

2. **M6: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** (3-4 –Ω–µ–¥–µ–ª–∏)
   - –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç
   - Batching —Å–ø—Ä–∞–π—Ç–æ–≤
   - Spatial culling

3. **M5: –ó–∞–≥–ª—É—à–∫–∏** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 2-3 –Ω–µ–¥–µ–ª–∏)
   - –ü—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π —É—Ä–æ–Ω
   - –ü—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ –±–æ—Ç—ã

---

## –°—Å—ã–ª–∫–∏

**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏**:
- `docs/specs/gameplay/spec_u2_dev_plan_v086_minimal.md` (—Å—Ç—Ä–æ–∫–∏ 412-486)
- `NEXT-STEPS.md` (M3 —Å–µ–∫—Ü–∏—è)
- `ROADMAP.md`

**–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã**:
- `M2.3-STATUS.md` (–∑–∞–≤–µ—Ä—à—ë–Ω)
- `M2.1-README.md` (Protobuf —Å `flight_assist`)
- `M1-README.md` (PhysicsSystem)

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: https://github.com/dkomlev/u2

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω**: 2025-11-20  
**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é  
**–°–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å issue/–≤–µ—Ç–∫—É `feature/m3.0-flight-assist`
