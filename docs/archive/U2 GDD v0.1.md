# **Universe Unlimited — Game Design Document (GDD) v0.1**

Пересборка идей 1999–2001 с критическим взглядом и современными инструментами. Документ живой: ожидает итераций, плейсхолдеры помечены `⧗`.

---

## **TL;DR**

MMO про логиcтику и влияние в процедурной галактике. Основные опоры: исследование → перевозки → производство → политика → конфликты по расписанию. Реал‑тайм «шутер» не цель; акцент на стратегию, экономику и социальные связи. Игроки начинают курьером, заканчивают владельцами заводов/планет/фракций.

**Дизайн‑принципы**

* **Авторитетный сервер, асинхронные бои.** Никакого «Quake‑PvP»; решения считаются сервером, бои — короткие тактические симы по скриптам игрока.  
* **Глубина через простые правила.** Меньше «кнопок», больше связей между системами.  
* **Игрок → Мир.** Долговременная ценность — не шмот, а инфраструктура, сети поставок и репутация.

---

## **1\) Видение и столпы**

**Видение.** «Единая живая галактика, где информация, топливо и люди — главные ресурсы; где ваши маршруты, заводы и договорённости важнее прицельной стрельбы».

**Столпы**

1. **Логистика как игра.** Риски, страховки, страховочные маршруты, кооперация.  
2. **Экономика игроками.** Короткая цепочка Топливо→Перевозки→Производство→Корабли, с реальными дефицитами.  
3. **Политика как мета‑игра.** Налоги, режимы, лицензии, контракты и косвенный контроль территории.  
4. **Конфликт по расписанию.** Асинхронные операции, роль тактики и подготовки, не пинг.  
5. **Информация как валюта.** Карты, чертежи, «пакеты знаний» (лицензии), шпионаж/контршпионаж.

**Что оставляем из писем (1999–2001)**

* ✅ Три режима движения (манёвр/сверхсвет/гиперпрыжок) — как основа отличий классов кораблей.  
* ✅ U2‑Tuner (волнЫ/каналы), но с современным UX и приватностью.  
* ✅ Топливо как главный расходник и экономический драйвер.  
* ✅ Планетарная политика и налоги (параметрическая, а не «набор строев»).

**Что переосмысляем**

* ❌ Прямой SQL‑клиент: только авторитетный слой сервера, CQRS/event‑sourcing.  
* ❌ «Тысячи потоков» на сервер: акторная модель/async I/O; масштабирование по звёздным системам.  
* ❌ Полная свобода «любой хост поднимает свою галактику». В 1.0 — ограниченные «комьюнити‑шарды» под кураторством, чтобы не развалить экономику.

---

## **2\) ЦА, платформа, камера**

* **ЦА:** любители Elite/X4/Travian/EVE‑лайк экономики без жёсткого PvP‑трижа.  
* **Платформа 1.0:** ПК (Windows/macOS/Linux). Мобильная карта/рынок — 1.x.  
* **Камера:** «cockpit»/3D‑вид \+ стратегическая карта системы/галактики.

---

## **3\) Ядро геймплея (петли)**

**Новая игра → Курьер**

1. Взять контракт на перевозку (биржа или NPC‑заказы).  
2. Спланировать маршрут (риск/страховка/запас топлива).  
3. Доставить → получить рейтинг/страховую историю.

**Предприниматель**  
4\. Аренда участка/цеха на планете → запуск простых производств.  
5\. Закупки сырья/топлива, оптимизация цепочек, найм новичков‑перевозчиков.

**Губернатор/Фракция**  
6\. Налоги, режимы, стимулы, лицензии, оборона маршрутов, войны расписанием.

**Общий прогресс:** доступ к классам кораблей/чертежам, влияние (standing), сеть контрактов.

---

## **4\) Модель мира**

**Галактика** — процедурная, `~50–100k` звёзд (1.0 — `~5–10k`), сгруппированных в регионы (шарды нагрузки). Компоненты звезды → температура → «зона жизни» → классы планет → биосфера/ресурсы → плотность населения.

**Планеты**

* Параметры: гравитация, атмосфера, биосфера, экология, запас руд по классам, вместимость населения, «уровень технологической доступности» (влияет на cap производств), стабильность.  
* Владение: игрок/фракция/НПС‑опекун (для старта).  
* **Политика как параметры** (а не фиксированные «строи»):  
  * Владение населением: государство/предприниматели/свободные.  
  * Кто платит и кому: налоги предприятий/НДФЛ/натурой.  
  * Распределение еды/пособий.  
  * Экологические нормы/штрафы/свалки.

---

## **5\) Движение и физика**

**Гибрид «Элита» physics.** Управляемость и «фановая» инерция с ограниченной ньютоновщиной.

**Двигатели**

* **Маневровый (Sublight):** разгон a \= P ⁄ (M \+ cargo). Расход `F_s = k_s · P · t`.  
* **Маршевый сверхсвет (UL):** разгон/торможение симметрично; риск «вылета» за границы. Расход `F_ul = k_ul · P · t`.  
* **Гравицапа (Hyper):** мгновенный прыжок между *известными* системами. Стоимость `F_h = k_h · M^α · D^β · (1 + σ)` где `σ` — помехи/перегрузка. Ограничения по `M_max` и `D_max`.

**Дизайн‑решения**

* ✅ «Прыжок» имеет подготовку (каст‑время). Даёт шанс перехвата/сканирования, не убивает сервер в пике.  
* ✅ Риски дальнего UL‑полёта компенсируются страховками и эвак‑капсулой (корабль потерян, персонаж жив).

---

## **6\) Экономика и производство**

**Ресурсы:** топливо, руда (смешанная), минералы (очищенные), полуфабрикаты, компоненты, люди (рабсила), «инфо‑пакеты».

**Цепочка**

1. **Шахты** → руда (грязная, с загрязнением).  
2. **ГОК/очистка** → смесь/чистые минералы (эффективность `E = x^n` для обогащения; `E = x^(1/n)` для очистки; `n∈[0.1..1.0]`).  
3. **Фабрики** → полуфабрикаты/компоненты (можно «грязный» вход, но штрафы: отходы/экология/износ).  
4. **Заводы** → оборудование/продовольствие/станки.  
5. **Орбитальные доки** → сборка/апгрейд кораблей (налоговое поле отдельное).

**Рынки**

* Локальные биржи на планетах, контракты на перевозку, страхование грузов, штрафы за экологию.  
* Динамическое ценообразование (см. §12): логистическая стоимость \= топливо \+ риск \+ время.

**Налоги и экология**

* Набор ставок/квоты/штрафы; экология влияет на кап населения и урожайность.

---

## **7\) Информация как ресурс (лицензии/знание)**

**Переосмысление «RP/GB».** В 1.0 избегаем микроменеджмента гигабайт.

**Модель**

* Производится **«Пакет Знаний» (Knowledge Package, KP)** на «лабораториях» (стационар/корабль). KPI: скорость/стоимость/уровень.  
* KP — это **лицензия** на производство класса товаров/уровня (например, «Маршевый UL‑двигатель T2»). У каждой лицензии: владелец, версия, `TechLevel`, `InfoWeight`.  
* На фабрику «заливается» лицензия (или её **ссылка из хранилища**) → даёт права и снижает штраф к себестоимости.  
* **Свободные (Free) KPs** существуют как маркетинг, но дают меньший бонус.  
* **Нелегальный шэринг** предотвращается серверной проверкой лицензий (право доступа, а не копия файла).

**Баланс высокий/низкий TechLevel**

* Система **мягкого регулирования**: чем популярнее TL‑товар в регионе, тем выше его «инфо‑наценка» (см. §12 формулы). Заброшенные уровни — дешевеют.

---

## **8\) Социальные системы: U2 Tuner 2.0**

* **Каналы‑волны:** имя строки \= ключ; публичные/приватные/защищённые; радио‑этикет (видимость при передаче).  
* **Сигналы SOS/рынок/набор** — преднастроенные каналы; эфирные маяки фракций.  
* **Логи/почта/контракты** — оффлайн‑доставка событий и выплат.

---

## **9\) Конфликты и безопасность**

**Почему не «догфайт MMO»?** Пинг и массовость; серверные затраты; fairness.

**Модель боёв**

* **Encounter‑инстанс** по месту/времени: стороны подают состав, роли и **скрипт тактики** (простые деревья поведения). Окно подготовки `⧗` минут. Сервер симулирует `30–90` сек боя, публикует отчёт/потери/дроп/логистику эвакуации.  
* **Типы операций:** засаду на маршруте, налёт на орбитальный узел, рейд на конвой, подавление пиратской базы, «стража» планеты.  
* **Пиратство:** скан/антискан, «граббер» как шанс‑операция против больших трюмов, мины — только в орбитальных зонах (хранится как плотность поля, а не объекты).

**Страхование и риски**

* Полисы на корпус/груз/экипаж; страховые премии растут от риска маршрута; фракции могут субсидировать.

---

## **10\) Прогрессия и классы кораблей**

* **Старт:** «Турист» (дешёвый, экономный, низкие лимиты торговли).  
* **Дерево:** Скаут → Лёгкий грузовик → Средний/Тяжёлый → Танкер/Суперфрейтер → Спец (пират/полицейский/штурм/носитель).  
* **Слоты:** двигатели (3 архетипа), трюмы, топливные баки, сканеры/контр‑сканеры, «инфо‑лаборатория», защита, вспомогательное.  
* **Ограничения:** масса/энергия/лицензии.

---

## **11\) Техническая архитектура (современная)**

**Клиент**

* Движок: `Unity` или `Godot 4` (⧗ финальное решение после прототипа), ECS для объектов; сетевой слой: `WebSocket + UDP (ENet)`.  
* Визуал: звёзды как точки/спрайты; LOD кораблей; «пост‑фильтры» для сенсоров.

**Сервер**

* **Авторитетное ядро:** акторная модель (например, кластер на `Akka/.NET Orleans/Elixir` — выбрать после spike). Один актор \= звёздная система/узел экономики.  
* **Горизонтальное шардирование** по системам/регионам. Перемещение — handover акторов.  
* **Событийная шина** (`NATS/Kafka`) \+ **CQRS/Event Sourcing**: запись — лог событий; чтение — проекции (рынки, карты, статусы).  
* **Хранилища:**  
  * Транзакции: `PostgreSQL` (или `CockroachDB` для мульти‑регионов)  
  * Кэш/материалы: `Redis`  
  * Телеметрия/баланс: `Timescale/ClickHouse`  
  * Бинарные ассеты/реплеи: объектное хранилище.  
* **Античит:** отсутствие доверия клиенту; сигнатуры команд; лимиты частоты; реплеи encounter‑боёв.  
* **Оперирование:** Kubernetes, канареечные обновления, feature‑flags.

**Сетевые шаблоны**

* Команды — надёжно (WS/gRPC), телеметрия — дельты по UDP; бои — серверные симуляции.

---

## **12\) Математика и баланс (эскиз)**

**Логистическая стоимость**

* `Cost_log = Fuel + (Risk · InsurRate) + TimePenalty`.  
* **Fuel** из §5; **Risk** — функция частоты инцидентов на участке \+ контрмеры; **Time** — из числа прыжков/подготовок.

**Инфо‑наценка (TL‑регуляция)**

* Для товара класса `c` и TL `t` в регионе `r`:  
  * `S_rt(c,t)` — доля выпуска за окно `T`.  
  * Инфо‑множитель: `I_rt = ( S_rt / Target_rt )^γ`, `γ∈[0.5..2.0]`.  
  * Себестоимость: `Base · I_rt` (снижается, если доля ниже целевой).

**Очистка/обогащение**

* Из писем: оставляем функции `x^n` и `x^(1/n)`; `n` — TechLevel фабрики.

**Налоги**

* Многоуровневые ставки и сборы: `Tax_out = Σ(τ_i · Base_i)`; лимиты на суммарную ставку, чтобы исключить «деградацию» планеты в AFK‑состояние.

---

## **13\) Жизненный цикл, безопасность, саппорт**

* **Оффлайн‑мир:** производство/контракты/налоги тикают по расписанию; корабли оффлайн — только в «безопасных» точках (станции/укрытия) или под риском рейдов с пенальти владельцу.  
* **Модерация:** гражданство/фракции, права на владение планетой; арбитраж по контрактам; лог чатов (приватность соблюдается, оффенсы детектятся локально по хеш‑словам).

---

## **14\) Roadmap (12–18 месяцев)**

**M0: Бумажный прототип (1 мес)**

* Экономика на таблицах, баланс TL‑регуляции; симка маршрутов; UX‑макеты.

**M1: Vertical Slice «Hauler» (3–4 мес)**

* Полёт в одной системе, гиперпрыжок между двумя; контракты; топливо; биржа; 3–5 кораблей. Авторитетный сервер.

**M2: Планеты и производство (3–4 мес)**

* Шахты→ГОК→фабрики→заводы; экология/население; налоги (минимум).

**M3: Лицензии/инфо‑пакеты (2–3 мес)**

* Лабы, лицензирование, рынки лицензий.

**M4: Конфликты‑инстансы (3 мес)**

* Тактики, отчёты, страхование, пиратство/контрмеры.

**M5: Фракции и владение планетами (2–3 мес)**

* Выборы/захват/аренда; стимулы; публичные каналы.

---

## **15\) Риски и смягчения**

* **Уход в «сплошную экономику».** Решение: ранние конфликты по расписанию, пиратство, страховки, миссии с риском.  
* **Баланс TL/«обесценивание старых уровней».** Регуляция популярности (§12), лицензии с регионо‑привязкой.  
* **Серверные издержки.** Акторы, масштаб по системам, лимиты на количество активных инстансов боёв.  
* **Соц‑токсичность.** Роли модераторов, штрафы/заморозки; инструменты позитивной кооперации (страховые/конвойные бонусы).

---

## **16\) Глоссарий (рабочий)**

* **KP** — Knowledge Package, лицензия на производство.  
* **UL** — Ultra‑light (сверхсветовой) маршевый двигатель.  
* **Hyper** — «гравицапа», прыжок между системами.  
* **Encounter** — серверный инстанс боя по скриптам сторон.  
* **Регионы** — группы систем, шард нагрузки и политики.

---

## **Приложение A. Критический разбор писем (1999–2001)**

**Сильные находки**

* Экономика как драйвер; топливо — главный расходник; «волны‑радио» для социализации; параметрическая политика; идея «информации как ресурса».

**Что устарело**

* Прямое SQL/толстый клиент → уязвимости/читерство; потоковая модель NT‑эпохи; «любой поднимает сервер» без координации экономики.

**Что переработано**

* RP/GB → лицензии (KP) с серверным управлением прав; бои → короткие инстансы; мины/ракеты → агрегированные поля; контейнеры/дроп → экономия на БД.

**Тезисы, которые сохраняем почти как есть**

* Гибридная физика с риском «вылета»; эвак‑капсула (персонаж живёт); «дорогие компьютеры» как метафора — теперь это роли/лицензии/страхование.

---

## **Открытые вопросы `⧗`**

1. Выбор движка (Unity/Godot) после spike по звёздному небу/прыжкам.  
2. Конкретные формулы страховых тарифов и риск‑модели.  
3. Список базовых типов руд/минералов (3–5 на старте).  
4. Сценарии перехватов во время подготовки к гиперпрыжку.  
5. UX «U2 Tuner»: быстрые пресеты каналов и приватность.

— Конец v0.1 —

