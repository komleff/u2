# ЭМ‑излучение, CS, сканеры и радары — дизайн без «душнины» (c_g = 3 км/с)

_Цель: дать простую, предсказуемую и гибко настраиваемую модель обнаружения и стелса по **электромагнитной подписи** (EM), **радарной заметности** (CS) и работе сенсоров. Все числа — ориентиры для баланса; математика сведена к минимуму._

---

## 0) Дизайн‑принципы

- **Лёгкий вход:** одна‑две формулы, остальное — «правила больших пальцев» и визуальные метрики в HUD.
- **Контр‑игра:** у любой «невидимости» есть контры (сектора подсветки, правильные сенсоры, время). У любого «радара‑прожектора» есть издержки (видимость, задержки, узкий конус).
- **Окружение — геймдизайн:** горячие/шумные зоны меняют расклад (тепловой фон, радиопомехи, пыль/туманность).
- **Никаких потолков и «магии»:** физика честная, но параметры сгруппированы в понятные ручки.

**Глобальная константа:** _игровая_ скорость света **c_g = 3 км/с**. Любые лучи/радио/радар летят/возвращаются не мгновенно.

---

## 1) Базовые подписи и «бюджет заметности» корабля

**EM‑подпись** складывается из:
- **Пассивной**: тепло (ИК), горячие точки (двигатель, электроника), искрение/плазма, космическая пыль на плазмочистителях.
- **Активной**: связь/телеметрия (EIRP), радары/лидары (излучение по команде), активные глушилки.
- **Геометрии**: форма, материалы, стыки ⇒ **CS** (effective radar cross‑section, σ).

В игре ведём **бюджет заметности** в трёх каналах: **IR**, **RF‑пассив** (ESM), **радар**. HUD показывает прогнозные дальности обнаружения: `R_det^IR`, `R_det^ESM`, `R_max^radar` — для ближайшего вражеского сенсора по текущей ориентации/окружению.

---

## 2) Простые формулы (хватит и этого)

- **ИК‑детект (пассив):**\
  **R₍IR₎ ≈ √( P_вид / (4π · F_min ) )**
  
  где `P_вид = (P_dump × D × S_spec) + утечки`. `F_min` — чувствительность сенсора (Вт/м²), `D` — направленность/экранирование (доля в сторону врага), `S_spec` — спектральный коэффициент (учёт «не в ту полосу»).

- **Радар (моностатический):**\
  **R₍rad₎ ≈ \[ ( P_t · G² · λ² · σ ) / ( (4π)³ · S_min ) \]^(1/4)**

- **ESM (пассивный RF):**\
  **R₍ESM₎ ≈ √( EIRP / (4π · PFD_min ) )**

**Задержки из‑за низкого c:** измерение приходит не сразу. ИК/ESM — `t ≈ d / c_g`; радар — «туда‑обратно»: `t ≈ 2d / c_g` (10 км → 6.7 с). Это влияет на частоту апдейта трека.

---

## 3) Параметризация по технологическим уровням (TL1…TL5)

_Идея: каждая подсистема имеет TL, который масштабирует ключевой параметр._

### 3.1 Сенсоры

**IR (IRST):** `F_min` (чем меньше, тем лучше), апертура, задержка обработки.
- TL1…TL5 ориентиры: **F_min = 3e−4 / 1e−4 / 3e−5 / 1e−5 / 3e−6 Вт/м²**; апертура **0.05 / 0.1 / 0.2 / 0.35 / 0.5 м²**.

**Радар:** пик‑мощность `P_t`, усиление `G`, приёмник `S_min`, длина волны `λ`, FOV и время удержания луча (dwell).
- TL1…TL5: `P_t = 10 / 25 / 60 / 150 / 350 кВт`, `G ≈ 28/33/37/40/43 dBi`, `S_min = 1e−16 … 1e−18 В`.

**ESM:** порог плотности потока **PFD_min** ↓, ширина полосы анализа, точность пеленга.
- TL1…TL5: `PFD_min = 1e−9 … 1e−11 Вт/м²`.

### 3.2 Стелс и CS

**CS (радарная заметность):**
- Разбиваем на факторы: `σ_eff = σ_geo × K_shape × K_RAM × K_edges × K_aspect(f)`.
- TL даёт типичные **дБ‑снижения**: форма −5/−10/−15/−20 dB, RAM −8/−15/−22/−30 dB, стыки −3/−6/−9/−12 dB.
- **Аспектность**: фронт/борт/верх/зад — разные `K_aspect`. В таблицах задаём базовые коэффициенты по классам.

**EM‑эмиссия (актив):**
- Связь/радар имеют **EIRP = P_tx · G_tx · duty**. _LPI/LPD‑режим_ даёт множитель `K_LPI < 1` (узкие лучи, шумоподобный сигнал, прыжки по частоте).

---

## 4) Пресеты «без душнины» (включай и играй)

### 4.1 Быстрые ориентиры дальностей (день‑0)

- **IR (TL2 сенсор, F_min≈1e−4):**
  - `P_вид=100 кВт` → **~9 км**
  - `P_вид=300 кВт` → **~15 км**
  - `P_вид=1 МВт` → **~28 км**
- **IR (TL4):** те же мощности → **50 / 87 / 159 км** (дальше, но апдейт медленнее из‑за c_g).

- **Радар (TL3) против σ = 1 / 10 / 50 / 200 м²:**
  - **~20 / 35 / 52 / 73 км**
- **ESM (TL3) против корабельной связи EIRP = 10 кВт:** **~16 км**; при LPI (×0.1) → **~5 км**.

### 4.2 Аспектные σ (по умолчанию)

| Класс | σ_front | σ_side | σ_top | σ_rear |
|---|---:|---:|---:|---:|
| Стелс‑перехватчик (TL4 форма/RAM) | 0.5 | 2 | 1 | 0.3 |
| Истребитель (TL2) | 3 | 7 | 5 | 2 |
| Корвет (TL3) | 10 | 40 | 25 | 8 |

_Замена на свои числа — одной таблицей в конфиге._

---

## 5) Режимы работы сенсоров (что нажимает игрок)

**IR‑поиск (пассив):** широкий конус, метит «горячие» цели. HUD показывает «вероятную дальность» и **временную задержку трека** `t≈d/c_g`.

**Радар:**
- **SCAN‑Sector:** FOV 40–120°, низкая частота апдейта. Хорошо для первичного поиска, плохо для ближнего боя.
- **SPOT‑Track:** узкий луч (5–10°), высокий dwell. Далеко видит конкретную цель, но излучает сильно и долго.
- **LPI‑Ping:** короткие пульсы, узкий луч, прыжки частоты. Дальность меньше, но сложнее поймать ESM.

**ESM:** всегда включён «тихо». Видит активные передачи/радар врага, даёт направление/тип сигнала и **окно времени** на ответ до его апдейта.

---

## 6) Как низкое c_g влияет на геймплей сенсоров

- **ИК/ESM:** апдейт трека ~ `d / 3 с (на км)` → на 20 км это **6.7 с** задержки. Манёвр цели успевает «устареть».
- **Радар:** “туда‑обратно” `2d / 3` → на 20 км **13.3 с**. Поэтому:
  - меньше «всевидящих» сканов по всему небу;
  - больше **секторальных** и **точечных** режимов;
  - важна **инерция трека** и предсказание в HUD (фильтр «призрак+прогноз»).

---

## 7) ECM/ECCM — простая модель

- **Шумовая помеха:** цели в конусе радара увеличивают `S_min` на множитель `J` (например, ×3/×5/×10). Радар отвечает **увеличением dwell** или **сужением луча**.
- **Обманка/декай:** даёт фиктивное `σ_fake` на отдельном расстоянии; трек «раскалывается». Контра — многоканальный радар или ESM‑подтверждение.
- **Home‑on‑Jam:** ракеты и радары с HoJ видят засвет помехи как маяк.
- **ECCM‑ручки:** частотная агрегация, поляризация, адаптивный порог (везде — один слайдер без математики для игрока).

---

## 8) Окружение как механика

- **Тёплые зоны** (станции, сбросы тепла, «пурга» от крупных кораблей): повышают `T_bg` и **снижают контраст IR** → сложнее детектить, проще спрятаться.
- **Радиошумные зоны** (магнитные бури, ретрансляторы): повышают фон по RF → растёт `PFD_min` у ESM/радара.
- **Пыль/туманность:** ослабляет радиолокацию (штраф к `R_max`), добавляет «ложных лучей» в HUD.

_Все эффекты — одним‑двумя коэффициентами в конфиге уровня._

---

## 9) Стелс‑тактика (EM/CS)

- **Ориентация носом на угрозу**: горячий хребет/радиаторы назад; экраны закрывают выбросы в переднюю полусферу.
- **LPI‑связь**: короткие, узкие, умеренные передачи; в бой — **радиомолчание**.
- **Аспектная подача**: держать фронт к радару (минимум σ_front); избегать «бортом на радар».
- **Время**: стелс — это окна; любую активность «видно» спустя t≈d/c_g — планируй залпы/манёвры под задержки.

---

## 10) UI/UX, чтобы не «душнить»

- **Одна панель «Заметность»** с тремя строками: `IR`, `ESM`, `RADAR` и числами **прогнозной дальности**.
- **Индикатор задержки трека** (песочные часы у маркера цели): «твой трек стареет через N сек».
- **Режимы в один клик:** SCAN / SPOT / LPI для радара; «Тихий канал» для связи; авто‑ориентация стелса.
- **Подсказки‑решения:** «Сузь сектор радара (R+), или включи LPI (видимость −)».

---

## 11) Готовые наборы (пример)

**A) Истребитель (TL2 сенсоры, TL2 стелс)**
- IR: F_min≈1e−4 → видит 300 кВт на ~15 км.
- Радар: R_max (σ=10 м²) ~ **26 км** (SCAN), SPOT держит цель до **35+ км**.
- ESM: ловит обычную связь на 10–15 км, LPI — 3–6 км.

**B) Стелс‑перехватчик (TL4 стелс, TL3 сенсоры)**
- σ_front≈0.5 м², σ_side≈2 м²; LPI‑связь. В IR держит `P_вид < 150 кВт` → большинство истребителей видят с 10–12 км.

**C) Корвет‑пикет (TL4 радар, TL4 ESM)**
- Дальний SPOT по σ=50 м² ~ **68 км**; видит вражеские пинги/радио раньше, чем его увидят в IR.

---

## 12) Балансные ручки (для дизайнеров)

- **IR:** `F_min`, апертура, spectral‑коэф. фона `S_spec(env)`.
- **Радар:** `P_t`, `G`, `S_min`, `λ`, FOV, dwell, режимы SCAN/SPOT/LPI, штраф за помехи `J`.
- **ESM:** `PFD_min`, полосы, гео‑решение (сколько антенн), авто‑классификатор сигналов.
- **CS:** σ по аспектам и классам, дБ‑снижения от формы/RAM/стыков, частотная зависимость.
- **Окружение:** `T_bg`, RF‑шум, ослабление радара, «тёплые следы».

---

### Быстрые шпаргалки

- **IR:** каждый ×10 к мощности цели даёт ×√10 к дальности.
- **Радар:** дальность растёт как **корень четвёртой степени** — удвоить дальность ≈ ×16 по (мощность×усиление/чувствительность).
- **ESM:** узкий луч и радиомолчание — лучшие друзья стелса.
- **c_g=3 км/с:** на каждые 10 км — **3.3 с** задержки IR/ESM и **6.7 с** радарного «эха».

