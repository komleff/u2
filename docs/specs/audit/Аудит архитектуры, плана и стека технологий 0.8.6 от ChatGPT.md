Дам сразу вывод, потом по разделам и чек-лист «что поправить перед запуском ИИ-агентов».

------

## 1. Общий вывод

1. Архитектура 0.8.6, План 0.8.6 и стек 0.8 в целом пригодны для разработки силами ИИ-агентов под управлением продюсера/гейм-дизайнера: задачи декомпозированы по этапам, есть критерии готовности и опора на ТТХ и FlightTest.
2. Основные риски именно для «ИИ-команды», а не людей:
   - наличие «наследственных» документов (FlightTest 0.5) с противоречащими решениями (динамическая скорость света, Coupled/Decoupled как must), которые ИИ может принять за актуальные;
   - местами архитектура и план расходятся по режимам ассистента и особенностям slow-light;
   - нет отдельного, короткого слоя документации «для продюсера/ДД» с формулировкой выгод и ограничений технологий простым языком.
3. После зачистки противоречий и добавления пары служебных разделов проект можно отдавать ИИ-агентам без необходимости продюсеру «лезть в код».

Дальше — по трём документам.

------

## 2. Архитектура 0.8.6

### 2.1. Что уже хорошо

1. **Чётко задан масштаб и модель сессий.**
   - 1–4 игрока + 8 ботов, всего 12 кораблей в активной зоне — это реалистичный потолок для минимальной версии и понятное ограничение для всех.
   - Модель сессий: персональная PvE-вселенная, PvP и корпоративные войны вынесены в будущее — снижает требования к масштабируемости и детерминизму.
2. **Отделение ТТХ в отдельный документ.**
   - Архитектура держит только диапазоны и ссылки на «U2 — ТТХ кораблей v0.8», сама математика и параметры кораблей — в отдельном источнике истины.
   - Для ИИ-агентов это важно: можно жёстко прописать, откуда брать массы/тягу/сигнатуры.
3. **Есть глоссарий.**
   - В конце архитектуры уже есть перечень терминов (скорость света c′, γ-фактор, щиты/броня/корпус и т. п.), что облегчает вход для не-программистов.
4. **Slow-light фиксирован по локации.**
   - В рекомендациях к архитектуре уже принято решение: никакого переменного поля c′(x), только константа на локацию (арена боя, астероидное поле, глубокий космос).

Это делает архитектуру в целом понятной для продюсера: «что мы можем, сколько кораблей тянем, почему вообще нужен замедленный свет».

### 2.2. Риски и недочёты

1. **Наследие Coupled/Decoupled.**
   - В FlightTest 0.5 Coupled/Decoupled — центральная часть ТЗ и HUD.
   - В Плане 0.8.6 явно указано, что в минимальной версии режим Coupled не реализуется, а ассистент работает в упрощённом режиме; есть отдельный milestone M5.5 и M6, где Coupled вынесен за пределы M0–M8.
   - В архитектуре по упрощённой рекомендации режим Coupled также отложен, но в старых кусках/ссылках его ещё можно встретить.
   - Для ИИ-агентов это критично: они могут «слить» старое и новое и начать проектировать Coupled уже в M0–M3.
2. **Следы переменного c′ и старых ограничений.**
   - FlightTest 0.5 и часть старых ТЗ используют терминологию `c_prime` без явного указания, что теперь он константа на локацию.
   - В архитектуре 0.8.6 это уже поправлено на уровне рекомендаций, но не везде явно подсвечено как «важное изменение по сравнению с 0.5».
3. **Уровень технического языка.**
   - Архитектура читаема для разработчиков, но для продюсера местами перегружена терминами «авторитарный сервер», «reconciliation», «snapshot», «behavior tree» и т. п.
   - Глоссарий это частично компенсирует, но пока не делает картину полностью прозрачной.
4. **Не везде есть связка «зачем это гейм-дизайнеру».**
   - Например, разделы про slow-light и γ-фактор хорошо описывают математику, но почти не объясняют:
      «какие гейм-эффекты это даёт»,
      «какие ограничения накладывает на ТЗ (скорости, дальности, ощущения в бою)».

### 2.3. Что доработать в архитектуре под ИИ-агентов

1. **Явно пометить «наследие 0.5».**
   - В начале документа добавить блок: «Исторические ТЗ (FlightTest 0.5) используются только как референс; все противоречия решаются в пользу версии 0.8.6».
   - Явно перечислить:
      — динамическая скорость света;
      — Coupled/Decoupled как обязательные режимы;
      — динамическая сетка мира;
      — старые требования к HUD — помечены как устаревшие.
2. **Свести режимы ассистента к одному описанию.**
   - В разделе про ассистент чётко написать:
      «В версиях M0–M8 реализуется только один режим — Stabilized. Режимы Coupled и Decoupled отложены до M9+ и в этом документе описаны лишь в общих чертах для будущего.»
   - Всё, что касается Coupled-алгоритмов с точными коэффициентами, перенести в отдельное «черновое ТЗ» и не давать туда доступа ИИ-агентам до M9+.
3. **Отдельные подпункты «для продюсера / гейм-дизайнера».**
   - В конце каждого крупного раздела (slow-light, ассистент, защита корабля, бой, AI-боты) добавить по 3–5 строк:
      — какой гейм-эффект даёт этот блок;
      — какие ограничения для дизайна (например, максимум 12 активных кораблей, невозможность «массовых флотов» в M0–M8);
      — какие параметры будут постоянно «подруливать» гейм-дизайнер и аналитика (P_hit диапазоны, силу ассистента, пороги перегрузок и т. п.).
4. **Явные ссылки на План и ТТХ.**
   - В начале архитектуры добавить короткий раздел «Как пользоваться документами»:
      — «за актуальной дорожной картой идти в План v0.8.6»;
      — «за параметрами кораблей — в ТТХ»;
      — «этот документ описывает только общую конструкцию мира и ограничений».

------

## 3. План разработки 0.8.6

### 3.1. Что уже хорошо

1. **Этапы M0–M8 логично выстроены и привязаны к целям.**
   - Сначала математика и физика (M0–M1), потом сеть и reconciliation (M2), затем ассистент и арбитраж источников управления (M3), затем наблюдение с задержкой света и HUD (M4), дальше эскалация ассистента и интеграция управления/прицеливания (M5–M5.5), и только потом бой и боты (M6).
2. **Есть «Definition of Done» и критерии по P_hit, поведению ботов и т. д.**
   - Например, для M6.1: диапазон вероятности попадания для боёв «истребитель против истребителя» 40–60 % в оптимальном диапазоне.
   - Для M6.2: частота принятия решений ботами ~10 Гц, а исполнение команд — 30 Гц.
   - Такой формат очень удобен именно для ИИ-агентов: цель → список задач → критерии приёмки.
3. **Чётко зафиксировано, чего мы не делаем.**
   - Режим Coupled на этапах M0–M8 не реализуется.
   - Детерминизм в строгом смысле не обязателен, важна статистическая близость и отсутствие «телепортов».
4. **Есть отдельный этап M5.5 для склейки управления и боя.**
   - Это снимает риск, что ИИ-агенты будут пытаться «запихнуть всё сразу» в M6, и даёт продюсеру понятный чек-пойнт: «всё нажимается, всё подсвечивается, но ещё без расчёта урона».

### 3.2. Риски и недочёты

1. **План всё ещё техноцентричный.**
   - Для продюсера/ДД многое звучит как «Entitas интеграция», «Protobuf протокол», «property-based тесты» — без прямой связи с игровым опытом.
   - ИИ-агентам это удобно, но для постановки задач в таск-трекере продюсеру нужно понимать, что означает «готовность M2.2» в терминах геймплея.
2. **Точки, где нужны «человеческие решения», не помечены явно.**
   - Например, подбор коэффициентов PD-регулятораассистента, пороги эскалации, базовые значения для P_hit — это не чисто технические задачи; там желательно участие гейм-дизайнера.
   - Для ИИ-агентов стоит явно писать: «требуется согласование с гейм-дизайнером по таким-то диапазонам».
3. **Много отсылок к другим документам без фиксированного списка.**
   - План ссылается на архитектуру, ТТХ, Definition of Fun, FlightTest и др., но не даёт единого перечня «обязательных входов» для каждого этапа — ИИ-агент сам может решить, какой документ считать главным.
4. **Оценки сроков и приоритетов есть, но нет сводного вида рисков по этапам.**
   - По рекомендациям уже посчитано, что упрощения дали экономию ~21 недели, но продюсеру полезно видеть табличку «Этап → риск → как поймём, что застряли».

### 3.3. Что доработать в плане под ИИ-агентов

1. **Для каждого milestone добавить мини-блок «Языком гейм-дизайнера».**
    Пример для M3.2 (ассистент):
   - «Что игрок почувствует: корабль перестаёт неконтролируемо крутиться, когда отпускаешь стики; ускорение и торможение по ощущениям плавные.»
   - «Что может настроить гейм-дизайнер: чувствительность стабилизации, насколько сильно ассистент «держит» корабль, пороги, при которых он вмешивается.»
2. **В каждой секции явно пометить задачи, где нужен живой input.**
   - Отдельный подпункт «Решения продюсера/ДД»:
      — диапазон комфортной скорости разгона;
      — диапазон «честных» P_hit;
      — логика поведения ботов (агрессивнее/осторожнее);
      — целевой уровень сложности M0–M3 и M6.
3. **Сделать для ИИ-агентов явный список входных документов по каждому этапу.**
   - Например:
      — M0.2: nominals.js + ТТХ 0.8;
      — M3.2: Architecture 0.8.6 + Definition of Fun для Stabilized;
      — M6.1: Architecture (раздел боевых правил) + ТТХ оружия.
   - Это позволит в пайплайне явно ограничить набор файлов, с которыми агент работает.
4. **Добавить сводную таблицу рисков по этапам.**
   - Столбцы: Этап → Основной риск → Как мониторим → Что делаем, если всё плохо (fallback).
   - Это нужно именно продюсеру, чтобы вовремя остановить/переназначить ИИ-агентов.

------

## 4. Технологический стек 0.8

### 4.1. Что уже хорошо

1. **Стек реалистичный и понятный ИИ-агентам.**
   - Клиент: Unity LTS, 3D-рендер с камерой сверху, физика в 2D-плоскости.
   - Сервер: .NET 8, C#, UDP (LiteNetLib/ENet), WebSocket для WebGL, сериализация через Protobuf.
   - Всё это — широко распространённые технологии, на которых ИИ-модель хорошо обучена.
2. **Чётко разделены задачи клиента и сервера.**
   - Клиент: визуализация, предсказание движения, HUD.
   - Сервер: авторитарная физика, расчёт боя, логика ботов.
3. **Обоснован выбор 3D-рендера для «2D-плоскости».**
   - Документ подробно объясняет, почему даже при плоской физике лучше использовать 3D-пайплайн: дальность 10–20 км, фрустум-каллинг, depth-тест, инстансинг, двухкамерная схема «ближний мир + дальние иконки».
   - Это важно для продюсера: понятно, чем обосновано усложнение.
4. **Есть рекомендации по минимальному набору пакетов и оптимизациям.**
   - URP, Input System, Addressables, Collections, Burst, опциональный Cinemachine;
   - на сервере — Serilog, Prometheus/OpenTelemetry, NUnit/xUnit, BenchmarkDotNet.

### 4.2. Риски и недочёты

1. **Версии и варианты библиотек не зафиксированы жёстко.**
   - «Unity LTS», «LiteNetLib или ENet-CSharp», «Google.Protobuf или protobuf-net» — ИИ-агент может выбрать любой вариант, что осложнит отладку и повторяемость сборок.
2. **Есть альтернативы (Godot, монолит на C++), которые лучше сразу исключить.**
   - Они описаны честно и с указанием рисков, но формально остаются в документе как допустимые.
   - Для ИИ-агентов нужна однозначная директива: для линии 0.8 используется только Unity/.NET.
3. **Термины уровня «SRP Batcher», «GPU instancing» и т. п. пока без перевода на язык ценности.**
   - Продюсеру достаточно знать: «это нужно, чтобы на целевых устройствах отображалось без тормозов N объектов на экране».
   - Сейчас документ это подразумевает, но не говорит прямо.
4. **Нет явного описания «зон ответственности» между ИИ-агентами.**
   - Стек говорит, какие технологии используются, но не говорит, какие для какого этапа будут трогаться.
   - Для ИИ-пайплайна важно: «на M0–M3 не трогаем DOTS/DOTS-Physics, не лезем в сложные шейдеры» и т. п.

### 4.3. Что доработать в стеке под ИИ-агентов

1. **Зафиксировать точные версии ключевых компонентов.**
   - Unity: конкретная LTS-ветка и минорная версия;
   - .NET: 8.0.x;
   - LiteNetLib/ENet: выбрать одну библиотеку и её версию;
   - Protobuf: выбрать Google.Protobuf или protobuf-net и закрепить.
   - Вписать это в начало документа как «обязательные версии для линии 0.8».
2. **Убрать альтернативы как варианты для 0.8.**
   - Godot и «монолит на C++» оставить в разделе «возможные пути для будущих проектов», но явно написать:
      «Для текущего проекта U2 в версиях 0.8.x используется только стек Unity + .NET 8. Изменение стека = отдельное решение на уровне продюсера и архитектора.»
3. **Добавить простой «нетехнический» блок.**
   - 3–4 абзаца для продюсера:
      — «Почему Unity»: кроссплатформенность, скорость прототипирования, визуальный редактор.
      — «Почему .NET-сервер»: производительность + продуктивность.
      — «Почему UDP+Protobuf»: живой real-time без избыточного трафика.
   - Этого достаточно, чтобы продюсер чувствовал, что стек обоснован.

------

## 5. Что обязательно сделать до передачи разработки ИИ-агентам

1. **Жёстко закрепить «набор живых документов 0.8.x».**
   - Архитектура 0.8.6;
   - План разработки 0.8.6;
   - ТТХ кораблей 0.8;
   - Технологический стек клиента и сервера 0.8;
   - Definition of Fun для режима Stabilized;
   - ТЗ FlightTest 0.5 — пометить как «исторический референс, не использовать как исходник требований».
2. **В каждом из живых документов:**
   - убрать двусмысленные упоминания Coupled/Decoupled и динамического c′ из тела текста, оставив их только в разделах про «будущие версии» или «исторические решения»;
   - довести глоссарий до полного набора используемых терминов (включая snapshot, reconciliation, lock-target, behavior tree, slow-light, γ-фактор);
   - добавить по одному короткому подытогу «для продюсера/ДД» в конце каждого крупного раздела.
3. **Сверху документов сделать «дорожный указатель» для ИИ-агентов.**
    Например, в отдельном файле «U2 — Руководство для ИИ-разработчиков»:
   - порядок чтения документов;
   - какие файлы описывают требования, а какие — старые эксперименты;
   - какие решения считать окончательными при конфликте;
   - в каких местах нужно спрашивать гейм-дизайнера (баланс, ощущения, сложность).
4. **На уровне процесса:**
   - завести шаблон задач, где продюсер формулирует задачу простым языком + ссылка на конкретные пункты ТЗ;
   - договориться, что ИИ-агент в ответ всегда ссылается на пункты архитектуры/плана/ТТХ, которые он реализует — это позволит отслеживать, не утащил ли он что-то из «наследия 0.5».

После этих доработок архитектура, план и стек станут достаточно «жёсткими» и прозрачными, чтобы ИИ-агенты могли надёжно кодировать, а продюсер — управлять ими, не влезая в детали реализации.